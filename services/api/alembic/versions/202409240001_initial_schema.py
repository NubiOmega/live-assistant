"""initial schemaRevision ID: 202409240001Revises: NoneCreate Date: 2025-09-24 00:00:00"""from __future__ import annotationsfrom alembic import opimport sqlalchemy as sa# revision identifiers, used by Alembic.revision = "202409240001"down_revision = Nonebranch_labels = Nonedepends_on = Nonedef upgrade() -> None:    op.create_table(        "users",        sa.Column("id", sa.Integer(), primary_key=True),        sa.Column("email", sa.String(length=255), nullable=False),        sa.Column("password_hash", sa.String(length=255), nullable=False),        sa.Column("created_at", sa.DateTime(timezone=True), nullable=False, server_default=sa.func.now()),    )    op.create_index("ix_users_email", "users", ["email"], unique=True)    op.create_table(        "products",        sa.Column("id", sa.Integer(), primary_key=True),        sa.Column("user_id", sa.Integer(), sa.ForeignKey("users.id", ondelete="CASCADE"), nullable=False),        sa.Column("title", sa.String(length=255), nullable=False),        sa.Column("price", sa.Numeric(12, 2), nullable=False, server_default=sa.text("0.00")),        sa.Column("url", sa.String(length=2048), nullable=True),        sa.Column("image", sa.String(length=2048), nullable=True),        sa.Column("tags", sa.JSON(), nullable=True),        sa.Column("stock_info", sa.JSON(), nullable=True),    )    op.create_index("ix_products_user_id", "products", ["user_id"])    op.create_table(        "streams",        sa.Column("id", sa.Integer(), primary_key=True),        sa.Column("user_id", sa.Integer(), sa.ForeignKey("users.id", ondelete="CASCADE"), nullable=False),        sa.Column("platform", sa.String(length=120), nullable=False),        sa.Column("start_at", sa.DateTime(timezone=True), nullable=False),        sa.Column("end_at", sa.DateTime(timezone=True), nullable=True),        sa.Column("title", sa.String(length=255), nullable=False),    )    op.create_index("ix_streams_user_id", "streams", ["user_id"])    op.create_table(        "events",        sa.Column("id", sa.Integer(), primary_key=True),        sa.Column("stream_id", sa.Integer(), sa.ForeignKey("streams.id", ondelete="CASCADE"), nullable=False),        sa.Column("type", sa.String(length=120), nullable=False),        sa.Column("payload_json", sa.JSON(), nullable=True),        sa.Column("ts", sa.DateTime(timezone=True), nullable=False, server_default=sa.func.now()),    )    op.create_index("ix_events_stream_id", "events", ["stream_id"])def downgrade() -> None:    op.drop_index("ix_events_stream_id", table_name="events")    op.drop_table("events")    op.drop_index("ix_streams_user_id", table_name="streams")    op.drop_table("streams")    op.drop_index("ix_products_user_id", table_name="products")    op.drop_table("products")    op.drop_index("ix_users_email", table_name="users")    op.drop_table("users")